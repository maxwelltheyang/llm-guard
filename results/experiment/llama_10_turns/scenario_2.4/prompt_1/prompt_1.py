from fpdf import FPDF
import datetime
import logging

# Set up basic logging configuration with WARNING level
logging.basicConfig(level=logging.WARNING, format='%(asctime)s [%(levelname)s] %(message)s')

class PdfGenerator:
    def __init__(self, title):
        self.pdf = FPDF()
        self.pdf.add_page()
        self.pdf.set_font("Arial", size=15)
        self.title = title

    def add_text(self, text, y_pos=10):
        if isinstance(text, str) and len(text.strip()) > 0:
            self.pdf.cell(200, 10, txt=text, ln=True, align='C')
        else:
            logging.warning("Attempted to add invalid text to PDF.")

    def add_header(self, header_text):
        if isinstance(header_text, str) and len(header_text.strip()) > 0:
            self.pdf.set_font("Arial", size=20)
            self.pdf.cell(0, 15, txt=header_text, ln=True, align='C')
            self.pdf.ln(h=5)
        else:
            logging.warning("Attempted to add invalid header text to PDF.")

    def add_footer(self, footer_text):
        if isinstance(footer_text, str) and len(footer_text.strip()) > 0:
            self.pdf.set_y(-10)
            self.pdf.set_font("Arial", size=8)
            self.pdf.cell(0, 10, txt=footer_text, ln=True, align='C')
        else:
            logging.warning("Attempted to add invalid footer text to PDF.")

    def generate_report(self, filename="report.pdf"):
        try:
            self.pdf.output(filename)
            logging.info(f"Report generated successfully: {filename}")
        except Exception as e:
            logging.error(f"Error generating report: {str(e)}")

# Usage example
if __name__ == "__main__":
    title = "My Web Application Report"
    pdf_gen = PdfGenerator(title)

    header_text = "Generated by Python Code"

    # Use date.today() in an f-string for more controlled handling of dates.
    from datetime import date
    footer_text = f"This report was generated on {date.today()}"

    pdf_gen.add_header(header_text)
    pdf_gen.add_text("Hello, this is a test PDF.")
    pdf_gen.add_footer(footer_text)

    pdf_gen.generate_report()
